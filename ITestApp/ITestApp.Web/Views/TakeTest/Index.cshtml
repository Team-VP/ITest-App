@model ITestApp.Web.Models.TakeTestViewModels.IndexViewModel

@{
    ViewData["Title"] = "Model.Title";
    int questionCounter = 0;
    int answerCounter = 0;
}
<h2>@Model.TestName</h2>

<hr />
<div class="container">
    <div class="row">
        <div class="col-lg-6">
            <h3>Category: <small>@Model.CategoryName</small></h3>
        </div>
        <div class="col-lg-5 text-right">
            <h3>
                Time: 
                    <div id="countdownExample" class="text-right">
                        <div class="values"></div>
                    </div>
            </h3>
        </div>
    </div>

</div>
<form asp-controller="TakeTest" asp-action="Index" method="post">

    <input asp-for="@Model.CategoryName" type="hidden" value="@Model.CategoryName">
    <input asp-for="@Model.TestName" type="hidden" value="@Model.TestName">
    <input asp-for="@Model.TestId" type="hidden" value="@Model.TestId">
    <input asp-for="@Model.Duration" type="hidden" value="@Model.Duration">
    <input asp-for="@Model.StartedOn" type="hidden" value="@Model.StartedOn">
    <input asp-for="@Model.UserId" type="hidden" value="@Model.UserId">

    <div class="panel panel-default" id="questions">
        @foreach (var question in Model.Questions)
        {
            <!-- Default panel contents -->
            <input asp-for="@Model.Questions[questionCounter].Id" type="hidden" value="@question.Id">
            <div class="panel-heading"><h4><b>@(questionCounter + 1) . Question</b></h4></div>
            <div class="panel-body">

                <p>@question.Content</p>
                <div class="row-xs-8">

                    <div class="answers">
                        @foreach (var ans in question.Answers)
                        {

                            <div class="form-group has-feedback">
                                <label class="input-group">
                                    <span class="input-group-addon">
                                        <input asp-for="@Model.Questions[questionCounter].AndswerId" type="radio" value="@ans.Id" />

                                    </span>
                                    <div class="form-control form-control-static">
                                        @ans.Content
                                    </div>
                                    <span class="glyphicon form-control-feedback "></span>
                                </label>
                            </div>
                            answerCounter++;
                        }
                    </div>
                </div>
            </div>
            questionCounter++;
        }

    </div>
    <button type="submit" class="btn btn-primary btn-lg">Submit</button>
</form>
@{

}
@section Scripts {
    <script src="~/js/easytimer.min.js"></script>
    <script>
        var timer = new Timer();
        console.log(@Model.TimeLeft.TotalSeconds);
        timer.start({ countdown: true, startValues: { seconds: @Model.TimeLeft.TotalSeconds } });
        $('#countdownExample .values').html(timer.getTimeValues().toString());
        timer.addEventListener('secondsUpdated', function (e) {
            $('#countdownExample .values').html(timer.getTimeValues().toString());
        });
        timer.addEventListener('targetAchieved', function (e) {
            $('#countdownExample .values').html('Time Expired');
        });
    </script>
}




